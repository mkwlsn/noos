<header><h1>API Errors</h1></header><p>Like any software, Figma enforces that any file you create is <em>valid</em>. For example, we make sure there's no way for a user to make "Frame A" the parent of "Frame B" <em>and</em> make "Frame B" the parent of "Frame A" at the same time. We enforce these restrictions by limiting the actions that you can take. Similarly, we make sure that plugins can't create invalid content in files by throwing <strong>errors</strong> or <strong>exceptions</strong> if an operation is invalid.</p><p>A key part of building a high quality plugin is getting familiar with these restrictions. That way, your plugin won't crash if a someone uses it in a way you didn't intend.</p><p>These restrictions are documented here, as well as in the pages of various properties and functions in the <strong><a href="/plugin-docs/api/api-reference/">reference</a></strong>.</p><h2 class="anchor anchorWithStickyNavbar_loeA" id="invalid-operations"><a class="hash-link" href="#invalid-operations" title="Direct link to heading"></a>Invalid Operations</h2><p>Functions that take arguments and property setters always have restrictions on what kind of values you can give them. For example, <code>opacity</code> can only be set to a number, and it must also be a number between 0 and 1. So, if your plugin includes the below sample code, the following error will be returned: <code>Error: in set_opacity: Expected "opacity" to have type number but got string instead</code>.</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">currentPage</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">selection</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token number">0</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">opacity</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">"test"</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_loeA" id="general-patterns-of-errors"><a class="hash-link" href="#general-patterns-of-errors" title="Direct link to heading"></a>General Patterns of Errors</h3><p>In general, errors returned by the plugin API will follow this pattern: <strong>Error: in <!-- -->&lt;<!-- -->property/method<!-- -->&gt;<!-- -->: Expected <!-- -->&lt;<!-- -->property<!-- -->&gt;<!-- --> to have type <!-- -->&lt;<!-- -->expected type<!-- -->&gt;<!-- --> but got <!-- -->&lt;<!-- -->actual type<!-- -->&gt;<!-- --> instead</strong>. Please refer to the signature of each method or property you're using to know what kind of values are accepted.</p><p>Here are some additional patterns of errors and invalid operations to be aware of:</p><ul><li><strong>Writing to Node Properties:</strong> Plugins in Dev Mode cannot edit the layers in a file (otherwise referred to as "nodes"), with the exception of certain metadata. And across other <a href="/plugin-docs/setting-editor-type/">editor types</a>, some nodes are read-only. Therefore, attempting to edit properties that are not editable will result in this error: <code>Cannot write to internal and read-only nodes</code>. Learn more in the <a href="/plugin-docs/api/api-reference/">reference</a>, as well as the <a href="/plugin-docs/working-in-dev-mode/">Working in Dev Mode →</a> and <a href="/plugin-docs/working-in-figjam/">Working in FigJam →</a> guides.</li><li><strong>Overriding Properties on Instance Nodes:</strong> Some properties on the <a href="/plugin-docs/api/InstanceNode/">InstanceNode</a> type can be overridden, while others cannot be. For example, you can't change the order of children in an instance, or their position. Therefore, attempting to override a property that can't be overridden will result in this error: <code>This property cannot be overriden on an instance</code>. Learn more about <a href="https://help.figma.com/hc/en-us/articles/360039150733-Apply-overrides-to-instances#Supported_properties" target="_blank" rel="noopener noreferrer">applying overrides to instances →</a>.</li><li><strong>Writing to Text Properties:</strong> Many text properties require the font of that TextNode to be loaded before they can be set. Therefore, attempting to write to text properties before the required font is loaded will result in the following error: <code>Cannot write to node with unloaded font "[font]"</code>. Learn more in the <a href="/plugin-docs/working-with-text/">Working with Text →</a> guide.</li><li><strong>Using properties and methods that aren't compatible with dynamic page loading:</strong> some synchronous operations in the Plugin API aren't compatible with dynamic page loading. If a plugin has the <code>"documentAccess": "dynamic-page"</code> manifest field, using these operations will trigger an error of type <code>Cannot call with documentAccess: dynamic-page. Use figma.getNodeByIdAsync() instead</code>. Learn more in the <a href="/plugin-docs/migrating-to-dynamic-loading/">Migrating Plugins to Dynamically Load Pages →</a> guide.</li><li><strong>Calling a method on an unloaded page:</strong> If the plugin manifest contains the <code>"documentAccess": "dynamic-page"</code> field, the plugin must explicitly load pages as needed. Using a method on a page has not been loaded will result in the following type of error: <code>Cannot access children on a page that has not been explicitly loaded. Remember to call </code>await page.loadAsync()<code>or</code>await figma.loadAllPagesAsync()<code> first</code>. Learn more in the <a href="/plugin-docs/migrating-to-dynamic-loading/">Migrating Plugins to Dynamically Load Pages →</a> guide.</li></ul>