<div class="developer_docs--section--FXtC8" id="payments"><div class="developer_docs--sectionHeader--opGQm">Payments</div><div></div><div class="developer_docs--subsection--hZWIc" id="payments-intro"><div class="developer_docs--subsectionHeader--xLpGV">Getting started</div><div><div><p>The Payments REST API allows you to securely validate purchases on the Figma platform from a server. This API builds off of the <a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="/plugin-docs/requiring-payment">Plugin Payments API</a> and allows you to restrict parts of your website or service to just those who have purchased your plugin, widget, or Community file.</p><p>This unlocks a couple of use cases for creators:<ol><li>Creators of plugins and widgets can <span class="format--bold--sWViV">protect potentially expensive endpoints</span> behind payment verification. For example, you can only allow users who have paid for your plugin to use the part of a copy-assistance plugin that makes expensive requests to a generative AI model.</li><li>Creators are able to <span class="format--bold--sWViV">gate valuable parts of their website</span> behind payment verification. For example, only allowing users that have purchased a Community file to access documentation and tutorials on your external website.</li></ol></p><p>The Payments REST API does not support OAuth 2. In order to use the Payments REST API, you'll need to authenticate your requests using a personal access token. You can follow our <a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="/developers/api#access-tokens">access token guide</a> to learn how to generate and use your own personal access token. <span class="format--italic--NDGIq">Note that plugin payment tokens are not a replacement for personal access tokens.</span></p></div></div></div><div class="developer_docs--subsection--hZWIc" id="payments-types"><div class="developer_docs--subsectionHeader--xLpGV">Types</div><div><div><table class="developer_docs--propTable--kpCgF"><thead><tr><th>Name</th><th>Properties</th></tr></thead><tbody><tr id="paymentinformation-type"><td><div><span class="format--mono--9g4LC">PaymentInformation</span></div><div class="developer_docs--propDesc--piGD8">An object describing a user's payment information for a plugin, widget, or Community file.</div></td><td><div><div class="developer_docs--propField--tfWli"><div><span class="developer_docs--monoDisplay--TtB7X"><span class="format--mono--9g4LC">user_id</span></span><span><span><span class="format--type--iqAoy">String</span></span></span></div><div> <span class="developer_docs--propDesc--piGD8">The ID of the user whose payment information was queried. Can be used to verify the validity of a response.</span></div></div><div class="developer_docs--propField--tfWli"><div><span class="developer_docs--monoDisplay--TtB7X"><span class="format--mono--9g4LC">resource_id</span></span><span><span><span class="format--type--iqAoy">String</span></span></span></div><div> <span class="developer_docs--propDesc--piGD8">The ID of the plugin, widget, or Community file that was queried. Can be used to verify the validity of a response.</span></div></div><div class="developer_docs--propField--tfWli"><div><span class="developer_docs--monoDisplay--TtB7X"><span class="format--mono--9g4LC">resource_type</span></span><span><span><span class="format--type--iqAoy">String</span></span></span></div><span class="developer_docs--propDesc--piGD8"><div>The type of the resource as a string enum that supports values <span class="format--string--H5KNu">PLUGIN</span>, <span class="format--string--H5KNu">WIDGET</span>, and <span class="format--string--H5KNu">COMMUNITY_FILE</span>.</div></span></div><div class="developer_docs--propField--tfWli"><div><span class="developer_docs--monoDisplay--TtB7X"><span class="format--mono--9g4LC">payment_status</span></span><span><span><a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="#paymentstatus-type"><span class="format--type--iqAoy">PaymentStatus</span></a></span></span></div><div> <span class="developer_docs--propDesc--piGD8">The user's payment status on the resource.</span></div></div><div class="developer_docs--propField--tfWli"><div><span class="developer_docs--monoDisplay--TtB7X"><span class="format--mono--9g4LC">date_of_purchase</span></span><span><span><span class="format--type--iqAoy">String</span></span></span></div><span class="developer_docs--propDesc--piGD8"><div><div>The UTC ISO 8601 timestamp indicating when the user purchased the resource. No value is given if the user has never purchased the resource.</div><br><div>Note that a value will still be returned if the user had purchased the resource, but no longer has active access to it (e.g. purchase refunded, subscription ended).</div></div></span></div></div></td></tr><tr id="paymentstatus-type"><td><div><span class="format--mono--9g4LC">PaymentStatus</span></div><div class="developer_docs--propDesc--piGD8">An object describing the user's payment status.</div></td><td><div><div class="developer_docs--propField--tfWli"><div><span class="developer_docs--monoDisplay--TtB7X"><span class="format--mono--9g4LC">type</span></span><span><span><span class="format--type--iqAoy">String</span></span></span></div><span class="developer_docs--propDesc--piGD8"><div><div class="developer_docs--constraints--bbd9J">The current payment status of the user on the resource, as a string enum<div><span class="format--string--H5KNu">UNPAID</span>: user has not paid for the resource</div><div><span class="format--string--H5KNu">PAID</span>: user has an active purchase on the resource</div><div><span class="format--string--H5KNu">TRIAL</span>: user is in the trial period for a subscription resource</div></div>Note that querying your own resource will return as "UNPAID". Additionally, the returned payment status does not update according to <a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="/plugin-docs/api/figma-payments#setpaymentstatusindevelopment">setPaymentStatusInDevelopment</a> usage.</div></span></div></div></td></tr></tbody></table></div></div></div><div class="developer_docs--subsection--hZWIc" id="payments-endpoints"><div class="developer_docs--subsectionHeader--xLpGV">Endpoints</div><div><div>There are two methods to query for a user's payment information on a plugin, widget, or Community file. The first method, using plugin payment tokens, is typically used when making queries from a plugin's or widget's code. The second method, providing a user ID and resource ID, is typically used when making queries from anywhere else.<p>Note that you can only query for resources that you own. In most cases, this means that you can only query resources that you originally created.</p></div></div><div></div><div class="developer_docs--subsection--hZWIc" id="get-payments-endpoint-plugin-payment-token"><div class="developer_docs--subsectionHeader--xLpGV">GET payments via plugin payment token</div><div><div id="payments-plugin-payment-token" class="developer_docs--endpoint--5kkM9"><div><p>Fetch the payment information of a user from your plugin or widget.</p></div><div class="developer_docs--subsubsectionHeader--EL8yi">HTTP Endpoint</div><p><span class="format--literal--ozK-p">GET</span><span class="format--literal--ozK-p">/v1/payments</span></p><div class="developer_docs--inlineReturnStyle--oRtFw"><div class="developer_docs--subsubsectionHeader--EL8yi">Return value</div><div class="developer_docs--codeText--mtqhX"><div class="developer_docs--returns--jJOoc"><pre><div>The <span><span><a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="#paymentinformation-type"><span class="format--type--iqAoy">PaymentInformation</span></a></span></span> corresponding to the given plugin payment token.</div></pre></div></div></div><div><table class="developer_docs--endpointTable--fhsUp developer_docs--propTable--kpCgF"><thead><tr><th>Query parameters</th><th>Description</th></tr></thead><tbody><tr><td><span class="format--mono--9g4LC">plugin_payment_token</span></td><td><span><span><span class="format--type--iqAoy">String</span></span></span><div class="developer_docs--propDesc--piGD8">Short-lived token returned from "getPluginPaymentTokenAsync" in the plugin payments API and used to authenticate to this endpoint. Read more about generating this token through "Calling the Payments REST API from a plugin or widget" below.</div></td></tr></tbody></table></div><table class="developer_docs--endpointTable--fhsUp developer_docs--propTable--kpCgF"><thead><tr><th>Error codes</th><th>Description</th></tr></thead><tbody><tr><td><span class="format--mono--9g4LC">400</span></td><td>Invalid parameter. The "message" parameter on the response will describe the error.</td></tr><tr><td><span class="format--mono--9g4LC">401</span></td><td>Issue with authentication. The "message" parameter on the response will describe the error.</td></tr></tbody></table><div class="developer_docs--inlineReturnStyle--oRtFw"><div class="developer_docs--subsubsectionHeader--EL8yi">Try it out for yourself</div><div class="developer_docs--codeText--mtqhX"><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="plugin_payment_token "></div><div class="developer_docs--personalToken--iJJwi"><div><a target="_blank" rel="noopener" data-fpl-component="" class="developer_docs--personalToken--iJJwi" href="/login?cont=/developers/docs">Log in to generate an access token</a><a target="_blank" rel="noopener" data-fpl-component="" class="link__link__n7llU" href="#access-tokens"><span class="developer_docs--helperText--DnhBy">What's this?</span></a></div></div></div><div><div class="developer_docs--codeTextHeader--Wl6ib">Your cURL command</div><div class="developer_docs--codeText--mtqhX">curl -H 'X-FIGMA-TOKEN: &lt;personal access token&gt;' 'https://api.figma.com/v1/payments'</div></div><button data-fpl-component="" data-show-focus="true" type="button" class="button-reset__buttonReset__zO1D7 button__button__-U-QJ typography__bodyMedium__phzT0 button__wideSize__fyONU button__primary__tP7NU button__solidStyle__Rwzx- button-reset__experimentalTextAlignInherit__padaM"><span class="button__buttonText__nvCyD"><span class="button__buttonContent__tVdQi">Log in to execute request</span></span></button><div class="developer_docs--jsonResultContainer--dW1f6 developer_docs--codeText--mtqhX"></div></div><div class="blackboard--blackboardWrapper--k3e-8"><div class="blackboard--blueBlackboard--cUVJY blackboard--blackboard--VH1qK"><div class="blackboard--blackboardContent--dvx-6"><div class="developer_docs--codeTextSection--KrK5Q"><div class="developer_docs--codeTextHeader--Wl6ib">Return value</div><div class="developer_docs--codeText--mtqhX"><div class="developer_docs--returns--jJOoc"><pre><div>The <span><span><a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="#paymentinformation-type"><span class="format--type--iqAoy">PaymentInformation</span></a></span></span> corresponding to the given plugin payment token.</div></pre></div></div></div><div class="developer_docs--explorer--xqrrQ developer_docs--codeTextSection--KrK5Q"><div class="developer_docs--codeTextHeader--Wl6ib">Try it out for yourself</div><div class="developer_docs--codeText--mtqhX"><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="plugin_payment_token "></div><div class="developer_docs--personalToken--iJJwi"><div><a target="_blank" rel="noopener" data-fpl-component="" class="developer_docs--personalToken--iJJwi" href="/login?cont=/developers/docs">Log in to generate an access token</a><a target="_blank" rel="noopener" data-fpl-component="" class="link__link__n7llU" href="#access-tokens"><span class="developer_docs--helperText--DnhBy">What's this?</span></a></div></div></div><div><div class="developer_docs--codeTextHeader--Wl6ib">Your cURL command</div><div class="developer_docs--codeText--mtqhX">curl -H 'X-FIGMA-TOKEN: &lt;personal access token&gt;' 'https://api.figma.com/v1/payments'</div></div><button data-fpl-component="" data-show-focus="true" type="button" class="button-reset__buttonReset__zO1D7 button__button__-U-QJ typography__bodyMedium__phzT0 button__wideSize__fyONU button__primary__tP7NU button__solidStyle__Rwzx- button-reset__experimentalTextAlignInherit__padaM"><span class="button__buttonText__nvCyD"><span class="button__buttonContent__tVdQi">Log in to execute request</span></span></button><div class="developer_docs--jsonResultContainer--dW1f6 developer_docs--codeText--mtqhX"></div></div></div></div></div></div><div><h3>Calling the Payments REST API from a plugin or widget</h3><p>We offer a method in our plugin payments API that enables you to securely query for the payment status of a user of your plugin or widget. You should use this method if your plugin or widget makes a call to a server endpoint. Follow the <a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="/plugin-docs/requiring-payment#getting-started">Getting Started</a> guide to set up the plugin payments API in your plugin or widget.</p><p>Once you have enabled the plugin payments API in your plugin's or widget's code, you can call the <a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="/plugin-docs/api/figma-payments#getpluginpaymenttokenasync"><span class="format--literal--ozK-p">getPluginPaymentTokenAsync</span></a> method to generate a secure plugin payment token to provide to this endpoint.</p></div></div></div><div class="developer_docs--subsection--hZWIc" id="get-payments-endpoint-user-resource-id"><div class="developer_docs--subsectionHeader--xLpGV">GET payments via user and resource ID</div><div><div id="payments-user-resource-ids" class="developer_docs--endpoint--5kkM9"><div><p>Fetch the payment information of a user on your resource using IDs.</p></div><div class="developer_docs--subsubsectionHeader--EL8yi">HTTP Endpoint</div><p><span class="format--literal--ozK-p">GET</span><span class="format--literal--ozK-p">/v1/payments</span></p><div class="developer_docs--inlineReturnStyle--oRtFw"><div class="developer_docs--subsubsectionHeader--EL8yi">Return value</div><div class="developer_docs--codeText--mtqhX"><div class="developer_docs--returns--jJOoc"><pre><div>The <span><span><a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="#paymentinformation-type"><span class="format--type--iqAoy">PaymentInformation</span></a></span></span> corresponding to the given user and resource IDs.</div></pre></div></div></div><div><table class="developer_docs--endpointTable--fhsUp developer_docs--propTable--kpCgF"><thead><tr><th>Query parameters</th><th>Description</th></tr></thead><tbody><tr><td><span class="format--mono--9g4LC">user_id</span></td><td><span><span><span class="format--type--iqAoy">Number</span></span></span><div class="developer_docs--propDesc--piGD8">The ID of the user to query payment information about. You can get the user ID by having the user OAuth2 to the Figma REST API.</div></td></tr><tr><td><span class="format--mono--9g4LC">community_file_id</span></td><td><span><span><span class="format--type--iqAoy">Number</span></span></span><div class="developer_docs--propDesc--piGD8">The ID of the Community file to query a user's payment information on. You can get the Community file ID from the file's Community page (look for the number after "file/" in the URL). Provide exactly one of "community_file_id", "plugin_id", or "widget_id".</div></td></tr><tr><td><span class="format--mono--9g4LC">plugin_id</span></td><td><span><span><span class="format--type--iqAoy">Number</span></span></span><div class="developer_docs--propDesc--piGD8">The ID of the plugin to query a user's payment information on. You can get the plugin ID from the plugin's manifest, or from the plugin's Community page (look for the number after "plugin/" in the URL). Provide exactly one of "community_file_id", "plugin_id", or "widget_id".</div></td></tr><tr><td><span class="format--mono--9g4LC">widget_id</span></td><td><span><span><span class="format--type--iqAoy">Number</span></span></span><div class="developer_docs--propDesc--piGD8">The ID of the widget to query a user's payment information on. You can get the widget ID from the widget's manifest, or from the widget's Community page (look for the number after "widget/" in the URL). Provide exactly one of "community_file_id", "plugin_id", or "widget_id".</div></td></tr></tbody></table></div><table class="developer_docs--endpointTable--fhsUp developer_docs--propTable--kpCgF"><thead><tr><th>Error codes</th><th>Description</th></tr></thead><tbody><tr><td><span class="format--mono--9g4LC">400</span></td><td>Invalid parameter. The "message" parameter on the response will describe the error.</td></tr><tr><td><span class="format--mono--9g4LC">401</span></td><td>Issue with authentication. The "message" parameter on the response will describe the error.</td></tr></tbody></table><div class="developer_docs--inlineReturnStyle--oRtFw"><div class="developer_docs--subsubsectionHeader--EL8yi">Try it out for yourself</div><div class="developer_docs--codeText--mtqhX"><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="user_id "></div><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="community_file_id "></div><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="plugin_id "></div><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="widget_id "></div><div class="developer_docs--personalToken--iJJwi"><div><a target="_blank" rel="noopener" data-fpl-component="" class="developer_docs--personalToken--iJJwi" href="/login?cont=/developers/docs">Log in to generate an access token</a><a target="_blank" rel="noopener" data-fpl-component="" class="link__link__n7llU" href="#access-tokens"><span class="developer_docs--helperText--DnhBy">What's this?</span></a></div></div></div><div><div class="developer_docs--codeTextHeader--Wl6ib">Your cURL command</div><div class="developer_docs--codeText--mtqhX">curl -H 'X-FIGMA-TOKEN: &lt;personal access token&gt;' 'https://api.figma.com/v1/payments'</div></div><button data-fpl-component="" data-show-focus="true" type="button" class="button-reset__buttonReset__zO1D7 button__button__-U-QJ typography__bodyMedium__phzT0 button__wideSize__fyONU button__primary__tP7NU button__solidStyle__Rwzx- button-reset__experimentalTextAlignInherit__padaM"><span class="button__buttonText__nvCyD"><span class="button__buttonContent__tVdQi">Log in to execute request</span></span></button><div class="developer_docs--jsonResultContainer--dW1f6 developer_docs--codeText--mtqhX"></div></div><div class="blackboard--blackboardWrapper--k3e-8"><div class="blackboard--blueBlackboard--cUVJY blackboard--blackboard--VH1qK"><div class="blackboard--blackboardContent--dvx-6"><div class="developer_docs--codeTextSection--KrK5Q"><div class="developer_docs--codeTextHeader--Wl6ib">Return value</div><div class="developer_docs--codeText--mtqhX"><div class="developer_docs--returns--jJOoc"><pre><div>The <span><span><a rel="noopener" data-fpl-component="" class="link__link__n7llU" href="#paymentinformation-type"><span class="format--type--iqAoy">PaymentInformation</span></a></span></span> corresponding to the given user and resource IDs.</div></pre></div></div></div><div class="developer_docs--explorer--xqrrQ developer_docs--codeTextSection--KrK5Q"><div class="developer_docs--codeTextHeader--Wl6ib">Try it out for yourself</div><div class="developer_docs--codeText--mtqhX"><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="user_id "></div><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="community_file_id "></div><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="plugin_id "></div><div style="display: flex; flex-direction: row;"><input class="developer_docs--explorerInput--erRMN" type="text" placeholder="widget_id "></div><div class="developer_docs--personalToken--iJJwi"><div><a target="_blank" rel="noopener" data-fpl-component="" class="developer_docs--personalToken--iJJwi" href="/login?cont=/developers/docs">Log in to generate an access token</a><a target="_blank" rel="noopener" data-fpl-component="" class="link__link__n7llU" href="#access-tokens"><span class="developer_docs--helperText--DnhBy">What's this?</span></a></div></div></div><div><div class="developer_docs--codeTextHeader--Wl6ib">Your cURL command</div><div class="developer_docs--codeText--mtqhX">curl -H 'X-FIGMA-TOKEN: &lt;personal access token&gt;' 'https://api.figma.com/v1/payments'</div></div><button data-fpl-component="" data-show-focus="true" type="button" class="button-reset__buttonReset__zO1D7 button__button__-U-QJ typography__bodyMedium__phzT0 button__wideSize__fyONU button__primary__tP7NU button__solidStyle__Rwzx- button-reset__experimentalTextAlignInherit__padaM"><span class="button__buttonText__nvCyD"><span class="button__buttonContent__tVdQi">Log in to execute request</span></span></button><div class="developer_docs--jsonResultContainer--dW1f6 developer_docs--codeText--mtqhX"></div></div></div></div></div></div></div></div></div></div>