<header><h1>on</h1></header><p>Registers an callback that will be called when an event happens in the editor. Current supported events are:</p><ul><li>The selection on the current page changed.</li><li>The current page changed.</li><li>The document has changed.</li><li>An object from outside Figma is dropped onto the canvas</li><li>The plugin has started running.</li><li>The plugin closed.</li><li>The plugin has started running.</li><li>The timer has started running.</li><li>The timer has paused.</li><li>The timer has stopped.</li><li>The timer is done.</li><li>The timer has resumed.</li></ul><h2 class="anchor anchorWithStickyNavbar_loeA" id="signature"><a class="hash-link" href="#signature" title="Direct link to heading"></a>Signature</h2><h3 class="property"><a href="/plugin-docs/api/properties/figma-on/">on</a>(type: <a href="/plugin-docs/api/properties/figma-on/#ArgFreeEventType">ArgFreeEventType</a>, callback: () =&gt; void): void</h3><h3 class="property"><a href="/plugin-docs/api/properties/figma-on/">on</a>(type: 'run', callback: (event: <a href="/plugin-docs/api/RunEvent/">RunEvent</a>) =&gt; void): void</h3><h3 class="property"><a href="/plugin-docs/api/properties/figma-on/">on</a>(type: 'drop', callback: (event: <a href="/plugin-docs/api/DropEvent/">DropEvent</a>) =&gt; boolean): void</h3><h3 class="property"><a href="/plugin-docs/api/properties/figma-on/">on</a>(type: 'documentchange', callback: (event: <a href="/plugin-docs/api/DocumentChangeEvent/">DocumentChangeEvent</a>) =&gt; void): void</h3><h3 class="property"><a href="/plugin-docs/api/properties/figma-on/">on</a>(type: 'slidesviewchange', callback: (event: <a href="/plugin-docs/api/SlidesViewChangeEvent/">SlidesViewChangeEvent</a>) =&gt; void): void</h3><h3 class="property"><a href="/plugin-docs/api/properties/figma-on/">on</a>(type: 'textreview', callback: (event: <a href="/plugin-docs/api/TextReviewEvent/">TextReviewEvent</a>) =&gt; Promise&lt;<a href="/plugin-docs/api/TextReviewRange/">TextReviewRange</a>[]&gt; | <a href="/plugin-docs/api/TextReviewRange/">TextReviewRange</a>[]): void</h3><h3 class="property"><a href="/plugin-docs/api/properties/figma-on/">on</a>(type: 'stylechange', callback: (event: <a href="/plugin-docs/api/StyleChangeEvent/">StyleChangeEvent</a>) =&gt; void): void</h3><h2 class="anchor anchorWithStickyNavbar_loeA" id="parameters"><a class="hash-link" href="#parameters" title="Direct link to heading"></a>Parameters</h2><h3 class="anchor anchorWithStickyNavbar_loeA" id="type"><a class="hash-link" href="#type" title="Direct link to heading"></a>type</h3><p>A string identifying the type of event that the callback will be called on.</p><p>This is either an <code>ArgFreeEventType</code>, <code>run</code>, <code>drop</code>, or <code>documentchange</code>. The <code>run</code> event callback will be passed a <code>RunEvent</code>. The <code>drop</code> event callback will be passed a <code>DropEvent</code>. The <code>documentchange</code> event callback will be passed a <code>DocumentChangeEvent</code>.</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">ArgFreeEventType</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token string" style="color: rgb(255, 121, 198);">"selectionchange"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token string" style="color: rgb(255, 121, 198);">"currentpagechange"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token string" style="color: rgb(255, 121, 198);">"close"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token string" style="color: rgb(255, 121, 198);">"timerstart"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token string" style="color: rgb(255, 121, 198);">"timerstop"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token string" style="color: rgb(255, 121, 198);">"timerpause"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token string" style="color: rgb(255, 121, 198);">"timerresume"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token string" style="color: rgb(255, 121, 198);">"timeradjust"</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token string" style="color: rgb(255, 121, 198);">"timerdone"</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_loeA" id="callback"><a class="hash-link" href="#callback" title="Direct link to heading"></a>callback</h3><p>A function that will be called when the event happens.
If <code>type</code> is 'run', then this function will be passed a <code>RunEvent</code>.
If <code>type</code> is 'drop', then this function will be passed a <code>DropEvent</code>.
If <code>type</code> is 'documentchange', then this function will be passed a <code>DocumentChangeEvent</code>.</p><p>Otherwise nothing will be passed in.</p><h2 class="anchor anchorWithStickyNavbar_loeA" id="remarks"><a class="hash-link" href="#remarks" title="Direct link to heading"></a>Remarks</h2><p>This API tries to match Node.js conventions around similar <code>.on</code> APIs.</p><p>It's important to understand that the <code>.on</code> API runs the callbacks <strong>asynchronously</strong>. For example:</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">on</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string" style="color: rgb(255, 121, 198);">"selectionchange"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string" style="color: rgb(255, 121, 198);">"changed"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string" style="color: rgb(255, 121, 198);">"before"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">currentPage</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">selection</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string" style="color: rgb(255, 121, 198);">"after"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token comment" style="color: rgb(98, 114, 164);">// Output:</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token comment" style="color: rgb(98, 114, 164);">// "before"</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token comment" style="color: rgb(98, 114, 164);">// "after"</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token comment" style="color: rgb(98, 114, 164);">// "changed"</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The asynchronous nature of these APIs have a few other implications.</p><p>The callback will not necessarily be called each time the event happens. For example, this will only trigger the event once:</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">currentPage</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">selection</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">createRectangle</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">currentPage</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">selection</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">createFrame</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>Nor will the ordering of the event trigger and event registration affect whether the callback is called.</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">currentPage</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">selection</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">createFrame</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">on</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string" style="color: rgb(255, 121, 198);">"selectionchange"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">"this will get called!"</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h2 class="anchor anchorWithStickyNavbar_loeA" id="available-event-types"><a class="hash-link" href="#available-event-types" title="Direct link to heading"></a>Available event types</h2><h3 class="anchor anchorWithStickyNavbar_loeA" id="currentpagechange"><a class="hash-link" href="#currentpagechange" title="Direct link to heading"></a><code>"currentpagechange"</code></h3><p>This event will trigger when the user navigates to a different page, or when the plugin changes the value of <code>figma.currentPage</code>.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="selectionchange"><a class="hash-link" href="#selectionchange" title="Direct link to heading"></a><code>"selectionchange"</code></h3><p>This event will trigger when the selection of the <strong>current page</strong> changes. This can happen:</p><ul><li>By user action.</li><li>Due to plugin code.</li><li>When the current page changes (a <code>"currentpagechange"</code> event always triggers a <code>"selectionchange"</code> event).</li><li>When a selected node is deleted.</li><li>When a selected node becomes the child of another selected node (in which case it is considered indirectly selected, and is no longer in <code>figma.currentPage.selection</code>)</li></ul><p>Note also that changing the selection via the plugin API, then changing it back to its previous value immediately still triggers the event.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="documentchange"><a class="hash-link" href="#documentchange" title="Direct link to heading"></a><code>"documentchange"</code></h3><p>If the plugin manifest contains <code>"documentAccess": "dynamic-page"</code>, you must first call <a href="/plugin-docs/api/figma/#loadallpagesasync"><code>figma.loadAllPagesAsync</code></a> to access this event. Because this may introduce a loading delay, consider using more granular alternatives, such as the <code>"stylechange"</code> event, or using <a href="/plugin-docs/api/properties/PageNode-on/"><code>PageNode.on</code></a> with the <code>"nodechange"</code> event.</p><p>This event will trigger when a change is made to the currently open file. The event will be called when nodes/styles are either added, removed, or changed in a document.</p><p>The callback will be passed with a DocumentChangeEvent with the below interface:</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">DocumentChangeEvent</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  documentChanges</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">DocumentChange</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>Note that <code>DocumentChangeEvent</code> has a <code>documentChanges</code> property with an array of <code>DocumentChange</code>s. Figma will not call the 'documentchange' callback synchronously and will instead batch the updates and send them to the callback periodically.</p></div></div><p>There are 6 different <a href="/plugin-docs/api/DocumentChange/"><code>DocumentChange</code></a> types that we currently notify on and we might add more in the future. Each of these changes has a <code>type</code> property to distinguish them:</p><table><thead><tr><th>Change</th><th><code>type</code> property</th><th>Description</th></tr></thead><tbody><tr><td><a href="/plugin-docs/api/DocumentChange/#createchange"><code>CreateChange</code></a></td><td><code>'CREATE'</code></td><td>A node has been created in the document. If a node with nested children is being added to the document a <code>CreateChange</code> will only be made for the highest level parent that was added to the document.</td></tr><tr><td><a href="/plugin-docs/api/DocumentChange/#deletechange"><code>DeleteChange</code></a></td><td><code>'DELETE'</code></td><td>A node has been removed from the document. If a node with nested children is being removed from the document a  <code>DeleteChange</code>  will only be made for the highest level parent that was removed from the document.</td></tr><tr><td><a href="/plugin-docs/api/DocumentChange/#propertychange"><code>PropertyChange</code></a></td><td><code>'PROPERTY_CHANGE'</code></td><td>A property of a node has changed.</td></tr><tr><td><a href="/plugin-docs/api/DocumentChange/#stylecreatechange"><code>StyleCreateChange</code></a></td><td><code>'STYLE_CREATE'</code></td><td>A style has been added to the document.</td></tr><tr><td><a href="/plugin-docs/api/DocumentChange/#styledeletechange"><code>StyleDeleteChange</code></a></td><td><code>'STYLE_DELETE'</code></td><td>A style has been removed from the document.</td></tr><tr><td><a href="/plugin-docs/api/DocumentChange/#stylepropertychange"><code>StylePropertyChange</code></a></td><td><code>'STYLE_PROPERTY_CHANGE'</code></td><td>A style has had a property changed.</td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_loeA" id="special-cases"><a class="hash-link" href="#special-cases" title="Direct link to heading"></a>Special cases</h4><p>We currently never notify a <code>'documentchange'</code> listener in the following scenarios:</p><ul><li>if the change was caused directly by your plugin in a <code>documentchange</code> callback</li><li>if an instance sublayer was updated by a change to a main component</li><li>if a node was updated as a result of a style changing</li></ul><h4 class="anchor anchorWithStickyNavbar_loeA" id="example"><a class="hash-link" href="#example" title="Direct link to heading"></a>Example</h4><p>Here is an example of exhaustively checking changes to the document and logging them to the console.</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">on</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string" style="color: rgb(255, 121, 198);">"documentchange"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">event</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">for</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">const</span><span class="token plain"> change </span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">of</span><span class="token plain"> event</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">documentChanges</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">switch</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">change</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">type</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">case</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">"CREATE"</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">        </span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token template-string string" style="color: rgb(255, 121, 198);">Node </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> created by a </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">origin</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation method function property-access" style="color: rgb(80, 250, 123);">toLowerCase</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> user</span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">break</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">case</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">"DELETE"</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">        </span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token template-string string" style="color: rgb(255, 121, 198);">Node </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> deleted by a </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">origin</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation method function property-access" style="color: rgb(80, 250, 123);">toLowerCase</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> user</span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">break</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">case</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">"PROPERTY_CHANGE"</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">for</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">const</span><span class="token plain"> prop </span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">of</span><span class="token plain"> change</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">properties</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">          </span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token template-string string" style="color: rgb(255, 121, 198);">Node </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token template-string interpolation">            change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token template-string interpolation">          </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> had </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">prop</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> changed by a </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">origin</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation method function property-access" style="color: rgb(80, 250, 123);">toLowerCase</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> user</span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">        </span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">break</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">case</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">"STYLE_CREATE"</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">        </span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token template-string string" style="color: rgb(255, 121, 198);">Style </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> created by a </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">origin</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation method function property-access" style="color: rgb(80, 250, 123);">toLowerCase</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> user</span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">break</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">case</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">"STYLE_DELETE"</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">        </span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token template-string string" style="color: rgb(255, 121, 198);">Style </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> deleted by a </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">origin</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation method function property-access" style="color: rgb(80, 250, 123);">toLowerCase</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> user</span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">      </span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">break</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">     </span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">case</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">"STYLE_PROPERTY_CHANGE"</span><span class="token operator">:</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">       </span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">for</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">const</span><span class="token plain"> prop </span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">of</span><span class="token plain"> change</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">properties</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">         </span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">            </span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token template-string string" style="color: rgb(255, 121, 198);">Style </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token template-string interpolation">              change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token template-string interpolation">            </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> had </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">prop</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> changed by a </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">${</span><span class="token template-string interpolation">change</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation property-access">origin</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token template-string interpolation method function property-access" style="color: rgb(80, 250, 123);">toLowerCase</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token template-string interpolation punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token template-string string" style="color: rgb(255, 121, 198);"> user</span><span class="token template-string template-punctuation string" style="color: rgb(255, 121, 198);">`</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">          </span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">       </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">       </span><span class="token keyword control-flow" style="color: rgb(189, 147, 249); font-style: italic;">break</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">    </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>For a more involved example see our <a href="https://github.com/figma/plugin-samples/tree/master/document-change" target="_blank" rel="noopener noreferrer">plugin samples on GitHub</a>.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="textreview"><a class="hash-link" href="#textreview" title="Direct link to heading"></a><code>"textreview"</code></h3><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>This event is only available to plugins that have the <code>"textreview"</code> capability in their <code>manifest.json</code> and the plugin is running in text review mode.</p></div></div><p><code>"textreview"</code> events allow plugins to review text in a document and act as either a replacement or a supplement to native spell check.</p><p>This event is triggered periodically when the user is typing in a text node. The callback will be passed with a TextReviewEvent with the below interface:</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">TextReviewEvent</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  text</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">string</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The <code>text</code> property is the text that the user has currently typed into the node.</p><p>A <code>"textreview"</code> event listener should return a promise that resolves to an array of <code>TextReviewRange</code> objects. Each <code>TextReviewRange</code> object represents a single range of text that should be marked as either an error or a suggestion. The <code>TextReviewRange</code> interface is defined as:</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">type</span><span class="token plain"> </span><span class="token class-name maybe-class-name">TextReviewRange</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  start</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">number</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  end</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">number</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  suggestions</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">string</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  color</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">'RED'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">'GREEN'</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token string" style="color: rgb(255, 121, 198);">'BLUE'</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>The <code>start</code> property is the index of the first character in the range. The <code>end</code> property is the index of the last character in the range. The <code>suggestions</code> property is an array of strings that represent the suggestions for the range. The <code>color</code> property is optional and can be used to change the color of the underline that is drawn under the range. If no color is specified the underline will be red.</p><p>For more information read our in depth guide on <a href="/plugin-docs/textreview-plugins/">text review plugins</a>.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="drop"><a class="hash-link" href="#drop" title="Direct link to heading"></a><code>"drop"</code></h3><p>This event will trigger when objects outside Figma (such as elements from other browser windows, or files from the local filesystem) are dropped onto the canvas.</p><p>It can also be triggered by a special <code>pluginDrop</code> message sent from the UI. See the <a href="/plugin-docs/creating-ui/#triggering-drop-events-from-the-ui">Triggering drop events from the UI</a> section for more details.</p><p>The callback will be passed a <code>DropEvent</code> with the below interface. It should return <code>false</code> if it wants to handle the particular drop and stop Figma from performing the default drop behavior.</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">DropEvent</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  node</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">BaseNode</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token maybe-class-name">SceneNode</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  x</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">number</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  y</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">number</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  absoluteX</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">number</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  absoluteY</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">number</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  items</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">DropItem</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  files</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">DropFile</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  dropMetadata</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">any</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ul><li>The <code>node</code> property contains the node where the drop landed. This will sometimes be the page node if the drop didn't land on anything in the canvas, or if target node is locked or cannot be a parent of another node.</li><li>The <code>x</code> and <code>y</code> properties are coordinates relative to the node drop target</li><li>The <code>absoluteX</code> and <code>absoluteY</code> properties are absolute canvas coordinates</li><li>The <code>items</code> property is an array of <code>DropItem</code> objects. You will see multiple objects if a drop contains multiple, non-file data types. If there are no data items, this array will be empty.</li><li>The <code>files</code> property is an array of dropped files represented as <code>DropFile</code> objects. If no files are present, this array will be empty.</li><li>The <code>dropMetadata</code> property comes from drop events <a href="/plugin-docs/creating-ui/#triggering-drop-events-from-the-ui">explicitly triggered by the UI</a>.</li></ul><p>Items and files will conform to the below interfaces:</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">DropItem</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">string</span><span class="token plain"> </span><span class="token comment" style="color: rgb(98, 114, 164);">// e.g. "text/html", "text/uri-list", etc...</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  data</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">string</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">DropFile</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">string</span><span class="token plain"> </span><span class="token comment" style="color: rgb(98, 114, 164);">// file name</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  type</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">string</span><span class="token plain"> </span><span class="token comment" style="color: rgb(98, 114, 164);">// e.g. "image/png"</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token function" style="color: rgb(80, 250, 123);">getBytesAsync</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token known-class-name class-name">Uint8Array</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token comment" style="color: rgb(98, 114, 164);">// get raw file bytes</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  </span><span class="token function" style="color: rgb(80, 250, 123);">getTextAsync</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token operator">:</span><span class="token plain"> </span><span class="token known-class-name class-name">Promise</span><span class="token operator">&lt;</span><span class="token builtin" style="color: rgb(189, 147, 249);">string</span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token comment" style="color: rgb(98, 114, 164);">// get text assuming file is UTF8-encoded</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>See the Icon Drag-and-Drop and PNG Crop examples in the <a href="https://github.com/figma/plugin-samples" target="_blank" rel="noopener noreferrer">figma/plugin-samples</a> repository for plugins that implement this API.</p><h4 class="anchor anchorWithStickyNavbar_loeA" id="ui-recommendations"><a class="hash-link" href="#ui-recommendations" title="Direct link to heading"></a>UI Recommendations</h4><p>When the plugin registers a drop callback, it should give the user instructions with either text in the plugin UI or <a href="/plugin-docs/api/properties/figma-notify/"><code>figma.notify()</code></a> (if the plugin does not show a UI) telling them what to do.</p><p><a href="/plugin-docs/api/properties/figma-notify/"><code>figma.notify()</code></a> can be called with the <code>timeout</code> option set to <code>Infinity</code> to make the notification show for as long as the plugin is open.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="close"><a class="hash-link" href="#close" title="Direct link to heading"></a><code>"close"</code></h3><p>This event will trigger when the plugin is about to close, either from a call to <code>figma.closePlugin()</code> or the user closing the plugin via the UI.</p><p>This is a good place to run cleanup actions. For example, some plugins add UI elements in the canvas by creating nodes. These UI elements should be deleted when the plugin is closed. Note that you don't need to call <code>figma.closePlugin()</code> again in this function.</p><p><strong>You should use this API only if strictly necessary, and run as little code as possible in the callback when doing so</strong>. When a user closes a plugin, they expect it to be closed immediately. Having long-running actions in the closing callback prevents the plugin for closing promptly.</p><p>This is also not the place to run any asynchronous actions (e.g. register callbacks, using <code>await</code>, etc). The plugin execution environment will be destroyed immediately when all the callbacks have returned, and further callbacks will not be called.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="run"><a class="hash-link" href="#run" title="Direct link to heading"></a><code>"run"</code></h3><p>This event is triggered when a plugin is run. For plugins with parameters, this happens after all parameters have been enter by the user in the quick action UI. For all other plugins this happens immediately after launch.</p><p>The callback will be passed a <code>RunEvent</code> that looks like:</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">RunEvent</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  parameters</span><span class="token operator">?</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">ParameterValues</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  command</span><span class="token operator">:</span><span class="token plain"> </span><span class="token builtin" style="color: rgb(189, 147, 249);">string</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><ul><li>The <code>parameters</code> property is of type <a href="/plugin-docs/api/figma-parameters/#parametervalues"><code>ParameterValues</code></a>, and contains the value entered for each parameter.</li><li>The <code>command</code> argument is the same as <a href="/plugin-docs/api/figma/#command"><code>figma.command</code></a>, but provided here again for convenience.</li></ul><p>Handling the <code>run</code> event is only required for plugins with parameters. For all plugins it can still be a convenient spot to put your top level code, since it is called
on every plugin run.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="stylechange"><a class="hash-link" href="#stylechange" title="Direct link to heading"></a><code>"stylechange"</code></h3><p>Triggered when any styles in the document change.</p><p>The callback will receive a StyleChangeEvent with the below interface:</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token keyword" style="color: rgb(189, 147, 249); font-style: italic;">interface</span><span class="token plain"> </span><span class="token class-name maybe-class-name">StyleChangeEvent</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">{</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">  styleChanges</span><span class="token operator">:</span><span class="token plain"> </span><span class="token maybe-class-name">StyleChange</span><span class="token punctuation" style="color: rgb(248, 248, 242);">[</span><span class="token punctuation" style="color: rgb(248, 248, 242);">]</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token punctuation" style="color: rgb(248, 248, 242);">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p>There are 3 different <a href="/plugin-docs/api/StyleChange/"><code>StyleChange</code></a> types. Each of these changes has a <code>type</code> property to distinguish them:</p><table><thead><tr><th>Change</th><th><code>type</code> property</th><th>Description</th></tr></thead><tbody><tr><td><a href="/plugin-docs/api/StyleChange/#stylecreatechange"><code>StyleCreateChange</code></a></td><td><code>'STYLE_CREATE'</code></td><td>A style has been added to the document.</td></tr><tr><td><a href="/plugin-docs/api/StyleChange/#styledeletechange"><code>StyleDeleteChange</code></a></td><td><code>'STYLE_DELETE'</code></td><td>A style has been removed from the document.</td></tr><tr><td><a href="/plugin-docs/api/StyleChange/#stylepropertychange"><code>StylePropertyChange</code></a></td><td><code>'STYLE_PROPERTY_CHANGE'</code></td><td>A style has had a property changed.</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_loeA" id="timerstart"><a class="hash-link" href="#timerstart" title="Direct link to heading"></a><code>"timerstart"</code></h3><p>This event will trigger when somebody starts a timer in the document. This can happen either by a user (either the current user or a multiplayer user) starting the timer from the UI, or triggered by plugin code. To inspect the current state of the timer when this event fires, use the <code>figma.timer</code> interface. For example:</p><div class="codeBlockContainer_X7hc language-ts theme-code-block"><div class="codeBlockContent_vqWU" style="color: rgb(248, 248, 242); background-color: rgb(40, 42, 54);"><pre tabindex="0" class="prism-code language-ts codeBlock_wPnj thin-scrollbar"><code class="codeBlockLines_fQUY"><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">on</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token string" style="color: rgb(255, 121, 198);">"timerstart"</span><span class="token punctuation" style="color: rgb(248, 248, 242);">,</span><span class="token plain"> </span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">log</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">timer</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">remaining</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain">figma</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token property-access">timer</span><span class="token punctuation" style="color: rgb(248, 248, 242);">.</span><span class="token method function property-access" style="color: rgb(80, 250, 123);">start</span><span class="token punctuation" style="color: rgb(248, 248, 242);">(</span><span class="token number">300</span><span class="token punctuation" style="color: rgb(248, 248, 242);">)</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain" style="display: inline-block;"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token comment" style="color: rgb(98, 114, 164);">// Output:</span><span class="token plain"></span><br></span><span class="token-line" style="color: rgb(248, 248, 242);"><span class="token plain"></span><span class="token comment" style="color: rgb(98, 114, 164);">// 300</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><h3 class="anchor anchorWithStickyNavbar_loeA" id="timerpause"><a class="hash-link" href="#timerpause" title="Direct link to heading"></a><code>"timerpause"</code></h3><p>Triggered when a timer that is running is paused.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="timerstop"><a class="hash-link" href="#timerstop" title="Direct link to heading"></a><code>"timerstop"</code></h3><p>Triggered when the timer is stopped.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="timerdone"><a class="hash-link" href="#timerdone" title="Direct link to heading"></a><code>"timerdone"</code></h3><p>Triggered when the timer is running and reaches 0 time remaining.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="timerresume"><a class="hash-link" href="#timerresume" title="Direct link to heading"></a><code>"timerresume"</code></h3><p>Triggered when a timer that is paused is resumed.</p><h3 class="anchor anchorWithStickyNavbar_loeA" id="timeradjust"><a class="hash-link" href="#timeradjust" title="Direct link to heading"></a><code>"timeradjust"</code></h3><p>Triggered when the total time on the timer changes. From the UI, it is only possible to add time to the timer. However, plugin code can both add and remove time from a running timer.</p>